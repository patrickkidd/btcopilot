# T4-5: Validate generated persona JSON

**Status:** Fix applied
**Date:** 2026-02-20

## Problem
`generate_persona()` in `synthetic.py` called `json.loads()` without handling `JSONDecodeError`. If the LLM returns malformed JSON (even after markdown fence stripping), the function crashes with an unhelpful JSONDecodeError instead of a clear ValueError.

## Fix
Wrapped `json.loads()` in try/except, re-raises as `ValueError` for consistency with the existing field validation below it. ValueError propagates through Celery as FAILURE (not retryable), which is correct since malformed JSON won't fix itself on retry.

## File Changed
- `btcopilot/btcopilot/tests/personal/synthetic.py:955-957`
