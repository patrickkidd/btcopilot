# T0-5: Birth event child resolution crash in accept flow

**Status:** Open
**Date:** 2026-02-24

## Problem
`scene.py:_do_addItem` crashes with `TypeError: item must be Person or Marriage, not None` at line 2017 when accepting PDP items containing birth events. `item.child()` returns None because the birth event's person reference doesn't resolve after ID remapping in the accept flow.

## Reproduction
1. Inject PDP data via MCP harness with birth events (e.g. `{"kind": "birth", "person": -1, ...}`)
2. Accept all PDP items
3. Crash in `_do_addItem` → `eventsFor(person)` where `person` is None

## Call Stack
```
personalappcontroller.py:985 _do → self._diagram.save(applyChange)
server_types.py:218          → diagramData = applyChange(diagramData)
personalappcontroller.py:779 → self.scene.addItem(item)
scene.py:360                 → self._do_addItem(item)
scene.py:527                 → for event in self.eventsFor(person, ...)
scene.py:2017                → raise TypeError("item must be Person or Marriage, not None")
```

## Root Cause
Not yet investigated. Birth events use `child()` to find the person born, but after `commit_pdp_items` remaps negative IDs to positive, the reference doesn't resolve. Likely an ID remapping issue in `btcopilot/schema.py:commit_pdp_items()` where birth event child references aren't updated.

## Blocked By
Nothing — can investigate immediately.

## Blocks
All PDP accept-all flows for diagrams containing birth events.
